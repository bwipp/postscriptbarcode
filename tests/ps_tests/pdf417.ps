%!PS

% ISO/IEC 15438:2015

% vim: set ts=4 sw=4 et :

/pdf417 dup /uk.co.terryburton.bwipp findresource cvx def


% Check when text pad spans ECI(s)

{  % Alpha sub-mode ml pad ECI alpha sub-mode
    (ABCDE^ECI000017FGHIJ) (debugcws parse parsefnc) pdf417
} [10 1 63 148 927 17 845 187 249 900 416 334 719 368 268 807 704 302] debugIsEqual

{  % Alpha sub-mode ll pad ECI lower sub-mode
    (ABCDE^ECI000017fghij) (debugcws parse parsefnc) pdf417
} [10 1 63 147 927 17 156 218 299 900 789 101 867 605 544 497 286 175] debugIsEqual

{  % Alpha sub-mode ml pad ECI mixed sub-mode
    (ABCDE^ECI000017,:#-.) (debugcws parse parsefnc) pdf417
} [10 1 63 148 927 17 404 466 539 900 258 530 604 736 34 857 83 87] debugIsEqual

{  % Alpha sub-mode ml pad ECI punctuation sub-mode
    (ABCDE^ECI000017;<>@[) (debugcws parse parsefnc) pdf417
} [10 1 63 148 927 17 750 32 94 900 584 719 688 323 833 520 96 310] debugIsEqual

{  % Lower sub-mode ml pad ECI lower sub-mode
    (abcdef^ECI000017ghijk) (debugcws parse parsefnc) pdf417
} [10 810 32 94 178 927 17 816 218 280 684 805 217 720 495 875 5 509] debugIsEqual

{  % Lower sub-mode ml pad ECI mixed sub-mode
    (abcdef^ECI000017,:#-.$) (debugcws parse parsefnc) pdf417
} [10 810 32 94 178 927 17 404 466 528 56 751 474 91 244 128 462 527] debugIsEqual

{  % Mixed sub-mode ll pad ECI lower sub-mode
    (,:#-.$^ECI000017abcde) (debugcws parse parsefnc) pdf417
} [10 853 435 497 567 927 17 1 63 149 147 776 891 628 708 789 869 217] debugIsEqual

{  % Mixed sub-mode pl pad ECI punctuation sub-mode
    (,:#-.$^ECI000017;<>@[) (debugcws parse parsefnc) pdf417
} [10 853 435 497 565 927 17 1 63 149 897 52 93 252 547 478 851 343] debugIsEqual

{  % Mixed sub-mode al pad ECI alpha sub-mode
    (,:#-.$^ECI000017ABCDE) (debugcws parse parsefnc) pdf417
} [10 853 435 497 568 927 17 1 63 149 701 209 361 816 324 480 878 154] debugIsEqual

{  % Punctuation sub-mode al pad ECI alpha sub-mode
    (;<>@[^ECI000017ABCDE) (debugcws parse parsefnc) pdf417
} [10 865 1 63 149 927 17 1 63 149 388 653 70 103 256 15 145 325] debugIsEqual

{  % Alpha sub-mode ps pad ECI numeric mode mixed sub-mode (no change)
    (ABCDE^ECI000017123456789012345,:#-.) (debugcws parse parsefnc) pdf417
} [19 1 63 149 927 17 902 1 812 292 890 124 745 900 853 435 497 900 900 922 25 913 708 587 75 612 101] debugIsEqual

{  % Alpha sub-mode ps pad ECI byte mode mixed sub-mode (no change)
    (ABCDE^ECI000017^160^161^162,:#-.) (debugcws parse parsefnc) pdf417
} [16 1 63 149 927 17 901 160 161 162 900 853 435 497 900 900 698 368 606 843 769 697 824 680] debugIsEqual

{  % Alpha sub-mode ml pad ECIs alpha sub-mode
    (ABCDE^ECI000017^ECI000004FGHIJ) (debugcws parse parsefnc) pdf417
} [12 1 63 148 927 17 927 4 845 187 249 900 559 708 663 465 31 690 138 451] debugIsEqual

{  % Lower sub-mode ml pad ECIs mixed sub-mode al pad ECI alpha sub-mode
    (abcdef^ECI000017^ECI000004,:#-.^ECI000005FGHIJ) (debugcws parse parsefnc) pdf417
} [19 810 32 94 178 927 17 927 4 404 466 538 927 5 156 218 299 900 900 496 715 726 458 51 802 313 674] debugIsEqual

% Numeric compaction for all-numeric input with length >= 8
{
    (12345678) (debugcws) pdf417
} [6 902 138 628 478 900 746 409 376 866 256 762 493 826] debugIsEqual


% Example

(PDF417 Symbology Standard) (dontdraw eclevel=1 columns=2) pdf417 /pixs get  % ISO/IEC 15438:2015 Figure 1, not same, slightly different encodation (figure "<SP> al S ll" instead of "ll <SP> as S")
[
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 1 1 0 1 0 1 0 0 1 1 1 0 0 0 0 0 1 1 1 0 1 0 1 1 0 0 1 1 1 1 0 0 0 1 1 1 0 1 1 1 0 1 1 0 0 1 1 0 0 0 1 1 1 1 0 1 0 1 0 1 1 1 1 0 0 0 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 1 1 1 1 0 1 0 1 0 0 1 1 0 0 0 0 1 1 0 1 0 0 0 0 1 1 1 0 0 0 1 0 0 1 1 1 1 0 1 0 0 0 1 0 1 0 0 0 0 0 1 1 1 1 1 0 1 0 1 0 0 1 1 0 0 0 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 1 1 0 1 0 1 0 1 1 1 1 1 1 0 0 0 1 0 0 1 0 0 0 1 0 0 1 1 1 1 0 0 0 1 0 0 1 1 1 1 1 0 1 1 0 1 0 0 0 0 1 1 0 1 0 1 0 0 1 1 1 1 1 0 0 0 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 0 1 0 1 1 1 1 1 0 1 1 1 1 1 0 0 1 1 0 1 1 1 0 0 0 1 1 0 0 0 0 1 0 1 0 0 0 1 0 1 0 0 0 1 0 0 0 0 0 0 1 0 1 0 1 1 1 1 0 0 1 1 1 1 0 0 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 1 0 1 0 1 1 1 0 0 0 1 0 0 0 0 0 1 1 1 1 0 0 1 0 0 0 0 0 1 0 1 0 0 1 0 0 1 0 0 0 0 1 1 1 1 1 0 1 1 0 1 1 0 1 0 1 1 1 0 0 0 1 0 0 0 0 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 1 1 1 0 1 0 1 1 1 1 0 1 0 0 0 0 1 0 0 1 1 1 1 0 0 0 0 1 0 1 0 0 0 1 1 0 0 1 1 1 1 1 0 0 1 0 0 1 0 0 1 1 1 1 0 1 0 1 1 1 1 0 0 1 0 0 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 0 1 0 0 1 1 1 0 0 1 1 1 0 0 0 0 1 0 1 1 1 0 0 0 1 1 1 0 1 0 0 0 0 1 1 1 1 0 0 1 1 0 1 0 0 0 1 1 1 0 1 1 0 1 0 0 1 1 1 0 1 1 1 1 0 0 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 1 0 1 0 1 1 1 1 1 1 0 1 1 1 1 0 1 1 1 1 0 1 0 1 1 0 0 1 1 0 0 0 0 1 0 1 0 0 1 1 1 1 1 1 0 1 1 1 0 0 1 1 0 1 0 1 1 1 1 1 1 0 1 1 1 1 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 1 0 1 0 0 1 1 0 1 1 1 1 1 1 0 0 1 0 0 0 1 1 1 1 0 0 1 1 0 1 1 0 0 1 0 0 1 1 1 1 0 0 1 0 0 1 0 0 0 0 1 0 1 0 0 1 1 0 0 1 1 1 1 1 0 0 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
    1 1 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 1 0 1 0 0 0 1 1 0 0 0 0 0 1 1 0 0 1 1 1 0 1 1 1 0 0 1 0 0 0 0 0 1 0 1 0 0 1 1 0 0 0 0 1 1 0 0 1 0 0 0 1 1 0 1 0 0 0 1 1 0 0 0 1 1 1 0 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 1 0 0 1
] isEqual
