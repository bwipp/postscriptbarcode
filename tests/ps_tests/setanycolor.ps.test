% Barcode Writer in Pure PostScript
% https://bwipp.terryburton.co.uk
%
% vim: set sw=4 sts=4 et:
%
% Copyright (c) 2004-2026 Terry Burton
%

/setanycolor dup /uk.co.terryburton.bwipp findresource cvx def

/ok_tmpl {
    { 0 setanycolor } dup 3 -1 roll 0 exch put
    true isEqual
} def

/er_tmpl {
    exch { 0 setanycolor pop pop } dup 3 -1 roll 0 exch put
    exch isEqual
} def

%
% RGB (6 hex chars)
%
(000000) ok_tmpl
(FFFFFF) ok_tmpl
(FF0000) ok_tmpl
(00FF00) ok_tmpl
(0000FF) ok_tmpl
(ff00ff) ok_tmpl
(Ab12Cd) ok_tmpl

(GG0000) /bwipp.colorBadCharacter er_tmpl
(00GG00) /bwipp.colorBadCharacter er_tmpl
(0000GG) /bwipp.colorBadCharacter er_tmpl
(GGGGGG) /bwipp.colorBadCharacter er_tmpl


%
% CMYK (8 hex chars)
%
(00000000) ok_tmpl
(FF000000) ok_tmpl
(00FF0000) ok_tmpl
(0000FF00) ok_tmpl
(000000FF) ok_tmpl

(GG000000) /bwipp.colorBadCharacter er_tmpl
(00GG0000) /bwipp.colorBadCharacter er_tmpl
(0000GG00) /bwipp.colorBadCharacter er_tmpl
(000000GG) /bwipp.colorBadCharacter er_tmpl
(GGGGGGGG) /bwipp.colorBadCharacter er_tmpl


%
% Named colors
%
/uk.co.terryburton.bwipp.global_ctx <<
    /named_colors <<
        (_testrgb) [ /DeviceRGB 1 0 0 ]
        (_testcmyk) [ /DeviceCMYK 0 1 0 0 ]
        (_testsep) [
            [ /Separation (Test Separation) /DeviceCMYK { dup 0.49 mul exch dup 0 mul exch dup 0.03 mul exch 0 mul } ]  1.0
        ]
    >>
>> def

(_testrgb) ok_tmpl
(_testcmyk) ok_tmpl
(_testsep) ok_tmpl

(_undefined) /bwipp.colorUnknown er_tmpl


%
% Invalid inputs
%
() /bwipp.colorEnpty er_tmpl
(F) /bwipp.colorBadLength er_tmpl
(FF) /bwipp.colorBadLength er_tmpl
(FFF) /bwipp.colorBadLength er_tmpl
(FFFF) /bwipp.colorBadLength er_tmpl
(FFFFF) /bwipp.colorBadLength er_tmpl
(FFFFFFF) /bwipp.colorBadLength er_tmpl
(FFFFFFFFF) /bwipp.colorBadLength er_tmpl
(FFFFFFFFFF) /bwipp.colorBadLength er_tmpl
