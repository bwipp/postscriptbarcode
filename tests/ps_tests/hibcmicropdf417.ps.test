% Barcode Writer in Pure PostScript
% https://bwipp.terryburton.co.uk
%
% vim: set sw=4 sts=4 et:
%
% Copyright (c) 2004-2024 Terry Burton
%

/hibcmicropdf417 dup /uk.co.terryburton.bwipp findresource cvx def


% Input validation

{ () (dontdraw) hibcmicropdf417
} /bwipp.hibcmicropdf417EmptyData isError

{ () (dontdraw validatecheck) hibcmicropdf417
} /bwipp.hibcmicropdf417EmptyData isError

{ (,) (dontdraw) hibcmicropdf417
} /bwipp.hibcmicropdf417BadCharacter isError

{ (A123BJC5D6E71H) (dontdraw validatecheck) hibcmicropdf417  % Check digit should be 'G'
} /bwipp.hibcmicropdf417BadCheckDigit isError

{ (/) (dontdraw validatecheck) hibcmicropdf417  % Check digit should be '+'
} /bwipp.hibcmicropdf417BadCheckDigit isError


% Example

(A123BJC5D6E71G) (dontdraw validatecheck) hibcmicropdf417 /pixs get
[
    1 1 1 0 1 1 1 0 1 0 1 0 1 1 1 1 1 1 0 1 0 1 1 0 0 0 0 1 1 0 1 1 1 1 1 0 1 0 1 1 1 1 0 0 1 1 1 0 1 1 1 0 1 0 1
    1 1 1 0 1 1 1 0 1 0 1 0 1 1 1 1 1 1 0 1 0 1 1 0 0 0 0 1 1 0 1 1 1 1 1 0 1 0 1 1 1 1 0 0 1 1 1 0 1 1 1 0 1 0 1
    1 1 1 0 0 1 1 0 1 0 1 0 0 1 1 1 1 1 0 0 1 1 0 0 0 1 0 1 0 1 1 1 1 1 1 0 1 1 1 0 0 0 1 0 1 1 1 0 0 1 1 0 1 0 1
    1 1 1 0 0 1 1 0 1 0 1 0 0 1 1 1 1 1 0 0 1 1 0 0 0 1 0 1 0 1 1 1 1 1 1 0 1 1 1 0 0 0 1 0 1 1 1 0 0 1 1 0 1 0 1
    1 1 1 1 0 1 1 0 1 0 1 0 1 0 0 1 1 1 0 0 1 1 1 0 0 0 0 1 0 0 0 0 0 1 0 0 1 1 0 0 0 1 1 0 1 1 1 1 0 1 1 0 1 0 1
    1 1 1 1 0 1 1 0 1 0 1 0 1 0 0 1 1 1 0 0 1 1 1 0 0 0 0 1 0 0 0 0 0 1 0 0 1 1 0 0 0 1 1 0 1 1 1 1 0 1 1 0 1 0 1
    1 1 1 1 0 0 1 0 1 0 1 1 1 1 1 1 0 1 1 0 1 0 0 0 1 1 0 1 1 1 0 0 0 0 1 1 0 0 1 1 1 0 1 0 1 1 1 1 0 0 1 0 1 0 1
    1 1 1 1 0 0 1 0 1 0 1 1 1 1 1 1 0 1 1 0 1 0 0 0 1 1 0 1 1 1 0 0 0 0 1 1 0 0 1 1 1 0 1 0 1 1 1 1 0 0 1 0 1 0 1
    1 1 1 0 0 0 1 0 1 0 1 0 0 0 1 1 1 1 0 0 0 1 1 0 1 1 0 1 1 1 0 1 1 1 1 1 1 0 0 1 0 1 0 0 1 1 1 0 0 0 1 0 1 0 1
    1 1 1 0 0 0 1 0 1 0 1 0 0 0 1 1 1 1 0 0 0 1 1 0 1 1 0 1 1 1 0 1 1 1 1 1 1 0 0 1 0 1 0 0 1 1 1 0 0 0 1 0 1 0 1
    1 1 0 0 0 0 1 0 1 0 1 0 0 0 0 1 1 0 1 1 1 1 0 1 1 1 0 1 1 1 0 0 0 1 1 1 0 1 0 0 0 1 0 0 1 1 0 0 0 0 1 0 1 0 1
    1 1 0 0 0 0 1 0 1 0 1 0 0 0 0 1 1 0 1 1 1 1 0 1 1 1 0 1 1 1 0 0 0 1 1 1 0 1 0 0 0 1 0 0 1 1 0 0 0 0 1 0 1 0 1
    1 1 0 0 0 1 1 0 1 0 1 1 0 1 0 1 1 1 1 1 0 0 1 1 1 0 0 1 1 0 1 0 0 0 0 0 0 1 1 1 0 0 1 0 1 1 0 0 0 1 1 0 1 0 1
    1 1 0 0 0 1 1 0 1 0 1 1 0 1 0 1 1 1 1 1 0 0 1 1 1 0 0 1 1 0 1 0 0 0 0 0 0 1 1 1 0 0 1 0 1 1 0 0 0 1 1 0 1 0 1
    1 1 0 0 0 1 0 0 1 0 1 1 0 0 0 1 1 1 1 1 0 0 1 0 0 1 0 1 1 0 0 0 1 1 1 1 1 0 0 1 0 0 1 0 1 1 0 0 0 1 0 0 1 0 1
    1 1 0 0 0 1 0 0 1 0 1 1 0 0 0 1 1 1 1 1 0 0 1 0 0 1 0 1 1 0 0 0 1 1 1 1 1 0 0 1 0 0 1 0 1 1 0 0 0 1 0 0 1 0 1
    1 1 1 0 0 1 0 0 1 0 1 0 0 0 0 1 1 0 0 0 1 1 0 0 1 0 0 1 0 0 0 0 1 1 0 0 0 1 1 0 0 1 0 0 1 1 1 0 0 1 0 0 1 0 1
    1 1 1 0 0 1 0 0 1 0 1 0 0 0 0 1 1 0 0 0 1 1 0 0 1 0 0 1 0 0 0 0 1 1 0 0 0 1 1 0 0 1 0 0 1 1 1 0 0 1 0 0 1 0 1
    1 1 1 1 0 1 0 0 1 0 1 0 1 1 1 1 1 1 0 1 0 1 1 0 0 0 0 1 1 1 0 0 0 1 0 1 1 0 0 0 1 0 0 0 1 1 1 1 0 1 0 0 1 0 1
    1 1 1 1 0 1 0 0 1 0 1 0 1 1 1 1 1 1 0 1 0 1 1 0 0 0 0 1 1 1 0 0 0 1 0 1 1 0 0 0 1 0 0 0 1 1 1 1 0 1 0 0 1 0 1
    1 1 1 1 0 1 0 1 1 0 1 1 1 0 1 1 0 1 0 1 1 1 1 1 0 0 0 1 1 1 0 1 1 1 1 1 0 0 1 0 1 1 0 0 1 1 1 1 0 1 0 1 1 0 1
    1 1 1 1 0 1 0 1 1 0 1 1 1 0 1 1 0 1 0 1 1 1 1 1 0 0 0 1 1 1 0 1 1 1 1 1 0 0 1 0 1 1 0 0 1 1 1 1 0 1 0 1 1 0 1
    1 1 1 1 0 1 0 1 0 0 1 1 0 1 1 1 0 0 0 1 1 0 0 0 0 1 0 1 0 1 0 0 1 1 1 1 0 1 1 1 1 0 0 0 1 1 1 1 0 1 0 1 0 0 1
    1 1 1 1 0 1 0 1 0 0 1 1 0 1 1 1 0 0 0 1 1 0 0 0 0 1 0 1 0 1 0 0 1 1 1 1 0 1 1 1 1 0 0 0 1 1 1 1 0 1 0 1 0 0 1
    1 1 1 0 0 1 0 1 0 0 1 1 1 0 1 0 0 1 1 1 0 0 1 1 0 0 0 1 0 0 0 1 1 0 1 1 1 1 1 0 0 0 1 0 1 1 1 0 0 1 0 1 0 0 1
    1 1 1 0 0 1 0 1 0 0 1 1 1 0 1 0 0 1 1 1 0 0 1 1 0 0 0 1 0 0 0 1 1 0 1 1 1 1 1 0 0 0 1 0 1 1 1 0 0 1 0 1 0 0 1
    1 1 1 0 1 1 0 1 0 0 1 0 0 1 1 1 1 1 1 0 0 1 1 1 0 1 0 1 0 1 1 0 1 0 0 1 1 1 0 0 0 0 0 0 1 1 1 0 1 1 0 1 0 0 1
    1 1 1 0 1 1 0 1 0 0 1 0 0 1 1 1 1 1 1 0 0 1 1 1 0 1 0 1 0 1 1 0 1 0 0 1 1 1 0 0 0 0 0 0 1 1 1 0 1 1 0 1 0 0 1
] debugIsEqual
